{% extends 'base.html' %}

{% block head %}
<title>{{bracket.theme}}</title>
{% endblock %}

{% block body %}

<a href="/">Home</a>

<h1>{{bracket.theme}}</h1>

{% if bracket.filled_out == False %}
<h2>Add {{ bracket.pool_size }} movies to the pool</h2>
<form action="/bracket/pool" method="post">
    {% for i in range(1, bracket.pool_size + 1) %}
        <div style="border: 1px solid red; margin: 5px; width: 50%;">
            <label for="movie{{i}}">Movie {{i}} title:</label>
            <input type="text" name="movie{{i}}" id="movie{{i}}">
            <label for="votes{{i}}">How many votes for this movie?</label>
            <input type="number" name="votes{{i}}" id="votes{{i}}">
        </div>
    {% endfor %}
    <input type="hidden" name="id" id="id" value="{{bracket.id}}">
    <input type="hidden" name="size" id="size" value="{{bracket.size}}">
    <input type="hidden" name="pool_size" id="pool_size" value="{{bracket.pool_size}}">
    <input type="submit" value="Submit">
</form>
<form action="/bracket/{{bracket.id}}/add-movie" method="post">
    <input type="hidden" name="id" id="id" value="{{bracket.id}}">
    <input type="submit" value="Add another movie">
</form>
{% endif %}


<!-- 
 ██████   ██████   ██████  ██          ██████  ██ ███████ ██████  ██       █████  ██    ██ 
██   ██ ██    ██ ██    ██ ██          ██   ██ ██ ██      ██   ██ ██      ██   ██  ██  ██  
██████  ██    ██ ██    ██ ██          ██   ██ ██ ███████ ██████  ██      ███████   ████   
██      ██    ██ ██    ██ ██          ██   ██ ██      ██ ██      ██      ██   ██    ██    
██       ██████   ██████  ███████     ██████  ██ ███████ ██      ███████ ██   ██    ██     
 -->                                                                                     
<!-- {% if bracket.pool|length >= 1  %}
    {% for m in bracket.pool %}
        {% if m.in_bracket %}
        <p>{{ m.title}} has {{m.votes}} votes</p>
        {% endif %}
    {% endfor %}
{% else %}
    <h2>No movies in the pool</h2>
{% endif %} -->
{% if bracket.filled_out %}
<div class="bracket-container">
    {% for b in range(1, bracket.size) %}
        {% if b % 2 != 0 %}
        <div class="matchup-container">
        {% for m in bracket.pool %}
            {% if m.bracket_order == b %}
            <span class="matchup-item">{{m.title}}</span>
            {% endif %}
        {% endfor %}
            <span class="matchup-item">vs.</span>
        {% for m in bracket.pool %}
            {% if m.bracket_order == b + 1 %}
            <span class="matchup-item">{{m.title}}</span>
            {% endif %}
        {% endfor %}
        </div>
        {% endif %}
    {% endfor %}
</div>
{% else %}
        <h2>You gotta fill out yer bracket, dawg!</h2>
{% endif %}
<!-- ================================================================================== -->

<a href="/bracket/delete/{{ bracket.id }}">Delete Bracket</a>





{% endblock %}